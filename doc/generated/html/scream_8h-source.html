<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>screamer: scream.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>scream.h</h1><a href="scream_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2008  Tobias Heer &lt;heer@cs.rwth-aachen.de&gt;                   *</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright (C) 2009  Tadeus Prastowo &lt;eus@member.fsf.org&gt;                   *</span>
<a name="l00004"></a>00004 <span class="comment"> *                                                                            *</span>
<a name="l00005"></a>00005 <span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining      *</span>
<a name="l00006"></a>00006 <span class="comment"> * a copy of this software and associated documentation files (the            *</span>
<a name="l00007"></a>00007 <span class="comment"> * "Software"), to deal in the Software without restriction, including        *</span>
<a name="l00008"></a>00008 <span class="comment"> * without limitation the rights to use, copy, modify, merge, publish,        *</span>
<a name="l00009"></a>00009 <span class="comment"> * distribute, sublicense, and/or sell copies of the Software, and to         *</span>
<a name="l00010"></a>00010 <span class="comment"> * permit persons to whom the Software is furnished to do so, subject to      *</span>
<a name="l00011"></a>00011 <span class="comment"> * the following conditions:                                                  *</span>
<a name="l00012"></a>00012 <span class="comment"> *                                                                            *</span>
<a name="l00013"></a>00013 <span class="comment"> * The above copyright notice and this permission notice shall be             *</span>
<a name="l00014"></a>00014 <span class="comment"> * included in all copies or substantial portions of the Software.            *</span>
<a name="l00015"></a>00015 <span class="comment"> *                                                                            *</span>
<a name="l00016"></a>00016 <span class="comment"> * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,            *</span>
<a name="l00017"></a>00017 <span class="comment"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF         *</span>
<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.     *</span>
<a name="l00019"></a>00019 <span class="comment"> * IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR          *</span>
<a name="l00020"></a>00020 <span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,      *</span>
<a name="l00021"></a>00021 <span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR      *</span>
<a name="l00022"></a>00022 <span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.                                            *</span>
<a name="l00023"></a>00023 <span class="comment"> **************************************************************************/</span>
<a name="l00032"></a>00032 <span class="preprocessor">#ifndef SCREAM_H</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define SCREAM_H</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;netinet/in.h&gt;</span> <span class="comment">/* sockets */</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="scream-common_8h.html" title="Common functions for the scream protocol client and server.">scream-common.h</a>"</span> <span class="comment">/* common headers and definitions */</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00041"></a>00041 <span class="preprocessor">#endif</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="scream_8h.html#58533720e892db49ea11e202aec9c845">00047</a> <span class="preprocessor">#define REGISTER_TIMEOUT 1000000ULL</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="scream_8h.html#d9af1484f63e43ae0a7383de66a23fdc">00053</a> <span class="preprocessor">#define REGISTER_REPETITION (-1)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00059"></a><a class="code" href="scream_8h.html#51bf649eb4bb2e62b4373eb1ffe22538">00059</a> <span class="preprocessor">#define RESET_TIMEOUT REGISTER_TIMEOUT</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="scream_8h.html#0e0076d59f8358f3439ac6cdc424df99">00065</a> <span class="preprocessor">#define RESET_REPETITION (-1)</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00072"></a><a class="code" href="scream_8h.html#6e1827b9a8b9eade2d032833824f4420">00072</a> <span class="preprocessor">#define RETURN_ROUTABILITY_CHECK_TIMEOUT REGISTER_TIMEOUT</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="scream_8h.html#18ba60eb0319e14f0de122fdade8ce05">00078</a> <span class="preprocessor">#define RETURN_ROUTABILITY_CHECK_REPETITION 3</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00084"></a><a class="code" href="scream_8h.html#e6dbd86d2610900142e5c53dce0ecda2">00084</a> <span class="preprocessor">#define UPDATE_ADDRESS_TIMEOUT REGISTER_TIMEOUT</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="scream_8h.html#c58d3180873352214d4f4c86035e3e16">00090</a> <span class="preprocessor">#define UPDATE_ADDRESS_REPETITION 3</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00096"></a><a class="code" href="scream_8h.html#ff619a3d5c19c2e1536adb8c86287db1">00096</a> <span class="preprocessor">#define MANAGER_POOL_RATE 5</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span>
<a name="l00102"></a><a class="code" href="structscream__base__data__s.html">00102</a> <span class="keyword">struct </span><a class="code" href="structscream__base__data__s.html">scream_base_data_s</a>
<a name="l00103"></a>00103 {
<a name="l00104"></a><a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">00104</a>   <span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>; 
<a name="l00105"></a><a class="code" href="structscream__base__data__s.html#cbfb25850bd1c470126c3ebb9d72b56a">00105</a>   pthread_mutex_t <a class="code" href="structscream__base__data__s.html#cbfb25850bd1c470126c3ebb9d72b56a">sock_lock</a>; 
<a name="l00106"></a><a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">00106</a>   <span class="keyword">struct </span>sockaddr_in <a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>; 
<a name="l00107"></a><a class="code" href="structscream__base__data__s.html#9ee6cf7470f05f03bc6cf87144e7054e">00107</a>   <span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#9ee6cf7470f05f03bc6cf87144e7054e">num_packets</a>; 
<a name="l00109"></a><a class="code" href="structscream__base__data__s.html#048efa7afbda918b05c1b74b781179cb">00109</a>   uint32_t <a class="code" href="structscream__base__data__s.html#048efa7afbda918b05c1b74b781179cb">id</a>; 
<a name="l00110"></a><a class="code" href="structscream__base__data__s.html#52dbbde738ea8517142206f6df09be5c">00110</a>   <span class="keywordtype">bool</span> <a class="code" href="structscream__base__data__s.html#52dbbde738ea8517142206f6df09be5c">is_registered</a>; 
<a name="l00111"></a>00111 };
<a name="l00112"></a>00112 
<a name="l00116"></a><a class="code" href="scream_8h.html#ab54582139f36bd97eb5dfa6a1061180">00116</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structscream__base__data__s.html">scream_base_data_s</a> <a class="code" href="structscream__base__data__s.html">scream_base_data</a>;
<a name="l00117"></a>00117 
<a name="l00125"></a>00125 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00126"></a>00126 scream_init (<a class="code" href="structscream__base__data__s.html">scream_base_data</a> *state);
<a name="l00127"></a>00127 
<a name="l00137"></a>00137 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00138"></a>00138 scream_set_dest (<a class="code" href="structscream__base__data__s.html">scream_base_data</a> *state,
<a name="l00139"></a>00139                  <span class="keyword">const</span> <span class="keywordtype">char</span> *host_name,
<a name="l00140"></a>00140                  uint16_t port);
<a name="l00141"></a>00141 
<a name="l00154"></a>00154 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00155"></a>00155 scream_register (<a class="code" href="structscream__base__data__s.html">scream_base_data</a> *state,
<a name="l00156"></a>00156                  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> sleep_time,
<a name="l00157"></a>00157                  <span class="keywordtype">int</span> iterations);
<a name="l00158"></a>00158 
<a name="l00171"></a>00171 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00172"></a>00172 scream_pause_loop (<a class="code" href="structscream__base__data__s.html">scream_base_data</a> *state,
<a name="l00173"></a>00173                    <span class="keywordtype">int</span> sleep_time,
<a name="l00174"></a>00174                    <span class="keywordtype">size_t</span> flood_size,
<a name="l00175"></a>00175                    <span class="keywordtype">int</span> iterations,
<a name="l00176"></a>00176                    <span class="keywordtype">bool</span> test_mode);
<a name="l00177"></a>00177 
<a name="l00190"></a>00190 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00191"></a>00191 scream_send (<span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>,
<a name="l00192"></a>00192              pthread_mutex_t *<a class="code" href="structscream__base__data__s.html#cbfb25850bd1c470126c3ebb9d72b56a">sock_lock</a>,
<a name="l00193"></a>00193              <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *<a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>,
<a name="l00194"></a>00194              <span class="keyword">const</span> <span class="keywordtype">void</span> *buffer,
<a name="l00195"></a>00195              <span class="keywordtype">size_t</span> buffer_size);
<a name="l00196"></a>00196 
<a name="l00209"></a>00209 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00210"></a>00210 scream_send_no_lock (<span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>,
<a name="l00211"></a>00211                      <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *<a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>,
<a name="l00212"></a>00212                      <span class="keyword">const</span> <span class="keywordtype">void</span> *buffer,
<a name="l00213"></a>00213                      <span class="keywordtype">size_t</span> buffer_size);
<a name="l00214"></a>00214 
<a name="l00232"></a>00232 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00233"></a>00233 scream_recv (<span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>,
<a name="l00234"></a>00234              pthread_mutex_t *<a class="code" href="structscream__base__data__s.html#cbfb25850bd1c470126c3ebb9d72b56a">sock_lock</a>,
<a name="l00235"></a>00235              <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *<a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>,
<a name="l00236"></a>00236              <span class="keywordtype">void</span> *buffer,
<a name="l00237"></a>00237              <span class="keywordtype">size_t</span> buffer_size);
<a name="l00238"></a>00238 
<a name="l00255"></a>00255 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00256"></a>00256 scream_recv_no_lock (<span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>,
<a name="l00257"></a>00257                      <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *<a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>,
<a name="l00258"></a>00258                      <span class="keywordtype">void</span> *buffer,
<a name="l00259"></a>00259                      <span class="keywordtype">size_t</span> buffer_size);
<a name="l00260"></a>00260 
<a name="l00287"></a>00287 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00288"></a>00288 scream_send_and_wait_for (<span class="keyword">const</span> <span class="keywordtype">void</span> *send_what,
<a name="l00289"></a>00289                           <span class="keywordtype">size_t</span> send_what_len,
<a name="l00290"></a>00290                           <a class="code" href="structscream__packet__general.html">scream_packet_general</a> *wait_for_what,
<a name="l00291"></a>00291                           <span class="keywordtype">size_t</span> wait_for_what_len,
<a name="l00292"></a>00292                           <span class="keyword">const</span> <span class="keywordtype">char</span> *wait_msg,
<a name="l00293"></a>00293                           <span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>,
<a name="l00294"></a>00294                           pthread_mutex_t *<a class="code" href="structscream__base__data__s.html#cbfb25850bd1c470126c3ebb9d72b56a">sock_lock</a>,
<a name="l00295"></a>00295                           <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *<a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>,
<a name="l00296"></a>00296                           <span class="keyword">const</span> <span class="keyword">struct</span> timeval *timeout,
<a name="l00297"></a>00297                           <span class="keywordtype">int</span> repetition);
<a name="l00298"></a>00298 
<a name="l00325"></a>00325 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00326"></a>00326 scream_send_and_wait_for_no_lock (<span class="keyword">const</span> <span class="keywordtype">void</span> *send_what,
<a name="l00327"></a>00327                                   <span class="keywordtype">size_t</span> send_what_len,
<a name="l00328"></a>00328                                   <a class="code" href="structscream__packet__general.html">scream_packet_general</a> *wait_for_what,
<a name="l00329"></a>00329                                   <span class="keywordtype">size_t</span> wait_for_what_len,
<a name="l00330"></a>00330                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *wait_msg,
<a name="l00331"></a>00331                                   <span class="keywordtype">int</span> <a class="code" href="structscream__base__data__s.html#11232a2c8a0bb4e996e252e70699479d">sock</a>,
<a name="l00332"></a>00332                                   <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *<a class="code" href="structscream__base__data__s.html#12793818beb8f6b54412a5c1b9a4e239">dest_addr</a>,
<a name="l00333"></a>00333                                   <span class="keyword">const</span> <span class="keyword">struct</span> timeval *timeout,
<a name="l00334"></a>00334                                   <span class="keywordtype">int</span> repetition);      
<a name="l00335"></a>00335 
<a name="l00346"></a>00346 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00347"></a>00347 scream_reset (<a class="code" href="structscream__base__data__s.html">scream_base_data</a> *state,
<a name="l00348"></a>00348               <a class="code" href="structscream__packet__result.html">scream_packet_result</a> *result);
<a name="l00349"></a>00349 
<a name="l00355"></a>00355 <span class="keywordtype">void</span>
<a name="l00356"></a>00356 print_result (<span class="keyword">const</span> <a class="code" href="structscream__packet__result.html">scream_packet_result</a> *result);
<a name="l00357"></a>00357 
<a name="l00359"></a><a class="code" href="structchannel__record.html">00359</a> <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a>
<a name="l00360"></a>00360 {
<a name="l00361"></a><a class="code" href="structchannel__record.html#27e815045f2a072b4c4a88950792968c">00361</a>   <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a> *<a class="code" href="structchannel__record.html#27e815045f2a072b4c4a88950792968c">next</a>; 
<a name="l00362"></a><a class="code" href="structchannel__record.html#6a213af6dde660a958dbff87d55d4a01">00362</a>   <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a> *<a class="code" href="structchannel__record.html#6a213af6dde660a958dbff87d55d4a01">prev</a>; 
<a name="l00363"></a><a class="code" href="structchannel__record.html#2e3fc86edd5ef2956fec53bd2b3a0ca9">00363</a>   <span class="keywordtype">char</span> *<a class="code" href="structchannel__record.html#2e3fc86edd5ef2956fec53bd2b3a0ca9">if_name</a>; 
<a name="l00364"></a><a class="code" href="structchannel__record.html#fd9edfc6aacd530e371593592e7e8b3d">00364</a>   <span class="keyword">struct </span>sockaddr_in <a class="code" href="structchannel__record.html#fd9edfc6aacd530e371593592e7e8b3d">if_addr</a>; 
<a name="l00365"></a><a class="code" href="structchannel__record.html#5812f224f5762d87f4960f6ebd3d4e80">00365</a>   <span class="keywordtype">int</span> <a class="code" href="structchannel__record.html#5812f224f5762d87f4960f6ebd3d4e80">sock</a>; 
<a name="l00366"></a><a class="code" href="structchannel__record.html#59ac19d5ed02c78c2c068931215a7c13">00366</a>   <span class="keywordtype">bool</span> <a class="code" href="structchannel__record.html#59ac19d5ed02c78c2c068931215a7c13">is_new</a>; 
<a name="l00367"></a><a class="code" href="structchannel__record.html#06b9f6cbdc2b461ab81ba0e51a02ab18">00367</a>   <span class="keywordtype">bool</span> <a class="code" href="structchannel__record.html#06b9f6cbdc2b461ab81ba0e51a02ab18">is_expired</a>; 
<a name="l00368"></a><a class="code" href="structchannel__record.html#2b224291975d40f308268c1c3ecfa83c">00368</a>   <span class="keywordtype">bool</span> <a class="code" href="structchannel__record.html#2b224291975d40f308268c1c3ecfa83c">is_modified</a>; 
<a name="l00369"></a><a class="code" href="structchannel__record.html#d0df78bb31721664a695c282267ede8d">00369</a>   <span class="keywordtype">bool</span> <a class="code" href="structchannel__record.html#d0df78bb31721664a695c282267ede8d">is_connected</a>; 
<a name="l00370"></a><a class="code" href="structchannel__record.html#88391ba4b61126633134839e9087dcb0">00370</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structchannel__record.html#88391ba4b61126633134839e9087dcb0">checking_time</a>; 
<a name="l00374"></a>00374 };
<a name="l00375"></a>00375 
<a name="l00380"></a><a class="code" href="structchannel__db.html">00380</a> <span class="keyword">struct </span><a class="code" href="structchannel__db.html">channel_db</a>
<a name="l00381"></a>00381 {
<a name="l00382"></a><a class="code" href="structchannel__db.html#fd7fb33e400de3908f327ccffbe4f4ca">00382</a>   <span class="keywordtype">size_t</span> <a class="code" href="structchannel__db.html#fd7fb33e400de3908f327ccffbe4f4ca">db_len</a>; 
<a name="l00383"></a><a class="code" href="structchannel__db.html#9d128c82e5698b4f6c843325b98afb81">00383</a>   <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a> *<a class="code" href="structchannel__db.html#9d128c82e5698b4f6c843325b98afb81">recs</a>; 
<a name="l00384"></a>00384 };
<a name="l00385"></a>00385 
<a name="l00392"></a>00392 <span class="keywordtype">void</span>
<a name="l00393"></a>00393 store_db_record (<span class="keyword">struct</span> <a class="code" href="structchannel__record.html">channel_record</a> *rec, <span class="keyword">struct</span> <a class="code" href="structchannel__db.html">channel_db</a> *db);
<a name="l00394"></a>00394 
<a name="l00401"></a>00401 <span class="keywordtype">void</span>
<a name="l00402"></a>00402 remove_db_record (<span class="keyword">struct</span> <a class="code" href="structchannel__record.html">channel_record</a> *rec, <span class="keyword">struct</span> <a class="code" href="structchannel__db.html">channel_db</a> *db);
<a name="l00403"></a>00403 
<a name="l00413"></a>00413 <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a> *
<a name="l00414"></a>00414 get_channel_by_name (<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structchannel__db.html">channel_db</a> *db);
<a name="l00415"></a>00415 
<a name="l00420"></a><a class="code" href="structcomm__channel.html">00420</a> <span class="keyword">struct </span><a class="code" href="structcomm__channel.html">comm_channel</a>
<a name="l00421"></a>00421 {
<a name="l00422"></a><a class="code" href="structcomm__channel.html#dd3a5e4625274170efc8f012d7a25b93">00422</a>   <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a> *<a class="code" href="structcomm__channel.html#dd3a5e4625274170efc8f012d7a25b93">channel</a>; 
<a name="l00423"></a><a class="code" href="structcomm__channel.html#e714600f8548ddb32bcea41514629907">00423</a>   <span class="keywordtype">int</span> *<a class="code" href="structcomm__channel.html#e714600f8548ddb32bcea41514629907">sock</a>; 
<a name="l00426"></a><a class="code" href="structcomm__channel.html#9efa6416f5be463ccbaa1827505b46fa">00426</a>   pthread_mutex_t *<a class="code" href="structcomm__channel.html#9efa6416f5be463ccbaa1827505b46fa">sock_lock</a>; 
<a name="l00427"></a><a class="code" href="structcomm__channel.html#cae1700773cd095c0d0c36076b5de86a">00427</a>   <span class="keywordtype">bool</span> *<a class="code" href="structcomm__channel.html#cae1700773cd095c0d0c36076b5de86a">is_registered</a>; 
<a name="l00431"></a>00431 };
<a name="l00432"></a>00432 
<a name="l00443"></a>00443 <span class="keywordtype">bool</span>
<a name="l00444"></a>00444 probe_ifs (<span class="keyword">struct</span> <a class="code" href="structchannel__db.html">channel_db</a> *db);
<a name="l00445"></a>00445 
<a name="l00460"></a>00460 <span class="keyword">struct </span><a class="code" href="structchannel__record.html">channel_record</a> *
<a name="l00461"></a>00461 check_return_routability (<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *dest_addr,
<a name="l00462"></a>00462                           <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structchannel__db.html">channel_db</a> *db,
<a name="l00463"></a>00463                           <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structcomm__channel.html">comm_channel</a> *main_channel);
<a name="l00464"></a>00464 
<a name="l00474"></a>00474 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00475"></a>00475 get_address (<span class="keywordtype">int</span> <a class="code" href="structchannel__record.html#5812f224f5762d87f4960f6ebd3d4e80">sock</a>, <span class="keyword">struct</span> sockaddr_in *name);
<a name="l00476"></a>00476 
<a name="l00495"></a>00495 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00496"></a>00496 update_address (<span class="keywordtype">int</span> <a class="code" href="structchannel__record.html#5812f224f5762d87f4960f6ebd3d4e80">sock</a>,
<a name="l00497"></a>00497                 uint32_t <span class="keywordtype">id</span>,
<a name="l00498"></a>00498                 <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *new_addr,
<a name="l00499"></a>00499                 <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *dest_addr,
<a name="l00500"></a>00500                 <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structcomm__channel.html">comm_channel</a> *main_channel);
<a name="l00501"></a>00501 
<a name="l00511"></a>00511 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00512"></a>00512 switch_comm_channel (<span class="keyword">struct</span> <a class="code" href="structcomm__channel.html">comm_channel</a> *main_channel,
<a name="l00513"></a>00513                      <span class="keyword">struct</span> <a class="code" href="structchannel__record.html">channel_record</a> *new_channel);
<a name="l00514"></a>00514 
<a name="l00524"></a>00524 <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a>
<a name="l00525"></a>00525 switch_comm_channel_no_lock (<span class="keyword">struct</span> <a class="code" href="structcomm__channel.html">comm_channel</a> *main_channel,
<a name="l00526"></a>00526                              <span class="keyword">struct</span> <a class="code" href="structchannel__record.html">channel_record</a> *new_channel);
<a name="l00527"></a>00527 
<a name="l00529"></a><a class="code" href="structmanager__data.html">00529</a> <span class="keyword">struct </span><a class="code" href="structmanager__data.html">manager_data</a>
<a name="l00530"></a>00530 {
<a name="l00531"></a><a class="code" href="structmanager__data.html#08b5592f1562494b94248ed43464cec5">00531</a>   <span class="keyword">struct </span><a class="code" href="structcomm__channel.html">comm_channel</a> *<a class="code" href="structmanager__data.html#08b5592f1562494b94248ed43464cec5">main_channel</a>; 
<a name="l00532"></a><a class="code" href="structmanager__data.html#4da422d129032eecda3be7211ada6b10">00532</a>   <span class="keyword">struct </span><a class="code" href="structchannel__db.html">channel_db</a> *<a class="code" href="structmanager__data.html#4da422d129032eecda3be7211ada6b10">channels</a>; 
<a name="l00533"></a><a class="code" href="structmanager__data.html#e87d7549c81b9f45c69da1579a127ce5">00533</a>   <span class="keywordtype">bool</span> <a class="code" href="structmanager__data.html#e87d7549c81b9f45c69da1579a127ce5">is_stopped</a>; 
<a name="l00534"></a><a class="code" href="structmanager__data.html#fb2cab6ad035cec7c73c9160200652fc">00534</a>   <span class="keyword">const</span> uint32_t *<a class="code" href="structmanager__data.html#fb2cab6ad035cec7c73c9160200652fc">id</a>; 
<a name="l00535"></a><a class="code" href="structmanager__data.html#fc4e314fc6bf9082d39c6b8144dfe2ed">00535</a>   <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in *<a class="code" href="structmanager__data.html#fc4e314fc6bf9082d39c6b8144dfe2ed">dest_addr</a>; 
<a name="l00536"></a><a class="code" href="structmanager__data.html#39368434a31fcceccd3c055bcf06feae">00536</a>   <a class="code" href="scream-common_8h.html#08b18ac8af0f3462354240d9732f3852">err_code</a> <a class="code" href="structmanager__data.html#39368434a31fcceccd3c055bcf06feae">exit_code</a>; 
<a name="l00537"></a>00537 };
<a name="l00538"></a>00538 
<a name="l00551"></a>00551 <span class="keywordtype">void</span>
<a name="l00552"></a>00552 reset_new_and_modified_flags (<span class="keyword">struct</span> <a class="code" href="structchannel__db.html">channel_db</a> *db);
<a name="l00553"></a>00553 
<a name="l00567"></a>00567 <span class="keywordtype">void</span>
<a name="l00568"></a>00568 start_manager (<span class="keywordtype">bool</span> is_careful,
<a name="l00569"></a>00569                <span class="keyword">const</span> <span class="keywordtype">char</span> *manager_name,
<a name="l00570"></a>00570                <span class="keyword">struct</span> <a class="code" href="structmanager__data.html">manager_data</a> *data);
<a name="l00571"></a>00571 
<a name="l00583"></a>00583 <span class="keywordtype">void</span> *
<a name="l00584"></a>00584 start_careful_manager (<span class="keywordtype">void</span> *data);
<a name="l00585"></a>00585 
<a name="l00598"></a>00598 <span class="keywordtype">void</span> *
<a name="l00599"></a>00599 start_sloppy_manager (<span class="keywordtype">void</span> *data);
<a name="l00600"></a>00600 
<a name="l00601"></a>00601 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00602"></a>00602 <span class="preprocessor"></span>}
<a name="l00603"></a>00603 <span class="preprocessor">#endif</span>
<a name="l00604"></a>00604 <span class="preprocessor"></span>
<a name="l00605"></a>00605 <span class="preprocessor">#endif </span><span class="comment">/* SCREAM_H */</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 23 16:29:49 2009 for screamer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
